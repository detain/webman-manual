# Процесс выполнения

## Процесс запуска процесса

После выполнения команды php start.php start следующий будет процесс выполнения:

1. Загрузка конфигурации из папки config/
2. Установка настроек Worker, таких как `pid_file`, `stdout_file`, `log_file`, `max_package_size` и т. д.
3. Создание процесса webman и прослушивание порта (по умолчанию 8787)
4. Создание пользовательского процесса в соответствии с настройками
5. После запуска процесса webman и пользовательского процесса выполняется следующая логика (все это выполняется в onWorkerStart):
  ① Загрузка файлов, установленных в `config/autoload.php`, таких как `app/functions.php`
  ② Загрузка настроек middleware из `config/middleware.php` (включая `config/plugin/*/*/middleware.php`)
  ③ Выполнение файла `config/bootstrap.php` (включая `config/plugin/*/*/bootstrap.php`), где будет запущен метод start класса для инициализации модулей, таких как инициализация соединения с базой данных Laravel
  ④ Загрузка определенных маршрутов из файла `config/route.php` (включая `config/plugin/*/*/route.php`)

## Процесс обработки запроса
1. Проверка соответствия запрошенного URL статическому файлу в папке public; если да, возвращается файл (запрос завершается), если нет, выполняется следующий шаг
2. Проверка соответствия URL какому-либо маршруту; если нет совпадений, выполняется шаг 3, если совпадение найдено, выполняется шаг 4
3. Проверка отключения стандартного маршрута; если он отключен, возвращается ошибка 404 (запрос завершается), если нет, выполняется шаг 4
4. Поиск middleware для контроллера, выполнение операций предобработки middleware (фаза запроса модели луковицы), выполнение бизнес-логики контроллера, выполнение операций постобработки middleware (фаза ответа модели луковицы), завершение запроса. (См. [модель луковицы для middleware](https://www.workerman.net/doc/webman/middleware.html#%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%B4%8B%E8%91%B1%E6%A8%A1%E5%9E%8B))
